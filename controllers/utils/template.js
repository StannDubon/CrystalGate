/*
 *   Controlador de uso general en las páginas web del sitio privado.
 *   Sirve para manejar la plantilla del encabezado y pie del documento.
 */

// Constante para completar la ruta de la API.
const USER_API = "services/admin/administrador.php";
// Constante para establecer el elemento del contenido principal.
const SIDEBAR = document.getElementById("TEMPLATE");
// Se establece el título de la página web.
document.querySelector("title").textContent = "CrystalGate";

//Añadir el icono
var link = document.createElement('link');
link.rel = 'icon';
link.href = '../resources/img/head-logo.png';
link.type = 'image/png';
document.head.appendChild(link);

/*  Función asíncrona para cargar el encabezado y pie del documento.
 *   Parámetros: ninguno.
 *   Retorno: ninguno.
 */


const loadTemplate = async () => {
  // Petición para obtener en nombre del usuario que ha iniciado sesión.
  const DATA = await fetchData(USER_API, "getUser");
  // Se verifica si el usuario está autenticado, de lo contrario se envía a iniciar sesión.
  if (DATA.session) {
    // Se comprueba si existe un alias definido para el usuario, de lo contrario se muestra un mensaje con la excepción.
    if (DATA.status) {
      // Se agrega el encabezado de la página web antes del contenido principal.
      SIDEBAR.innerHTML = `
            <div id="nav-side-bar-button">
            <svg width="152" height="114" viewBox="0 0 152 114" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill="var(--color-texto-1)" d="M0 9.5C0 4.2533 4.2533 0 9.5 0H142.5C147.747 0 152 4.2533 152 9.5V9.5C152 14.7467 147.747 19 142.5 19H9.5C4.2533 19 0 14.7467 0 9.5V9.5ZM0 57C0 51.7533 4.2533 47.5 9.5 47.5H142.5C147.747 47.5 152 51.7533 152 57V57C152 62.2467 147.747 66.5 142.5 66.5H9.5C4.2533 66.5 0 62.2467 0 57V57ZM0 104.5C0 99.2533 4.2533 95 9.5 95H142.5C147.747 95 152 99.2533 152 104.5V104.5C152 109.747 147.747 114 142.5 114H9.5C4.2533 114 0 109.747 0 104.5V104.5Z"/>
            </svg>
            </div>
        
            <div class="nav-container" id="nav-bar">
            <div class="nav-logo">
                <svg width="209" height="82" viewBox="0 0 209 82" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M80.5 76L57 38H51.5L40 20L51.5 0L97.5 76H80.5Z" fill="#3F91FD"/>
                    <path d="M0 76L17 48L34.1359 76H0Z" fill="#3229B1"/>
                    <path d="M39.5 76L29 59.5H24L17 48L29 28L58 76H39.5Z" fill="#3452D3"/>
                    <path d="M58 76L32 33L40 20L76 76H58Z" fill="#3229B1"/>
                    <path d="M84.8558 16.6143C84.7197 16.1733 84.5318 15.7785 84.2923 15.43C84.0581 15.0761 83.775 14.7739 83.4428 14.5234C83.1161 14.273 82.7404 14.0851 82.3157 13.9599C81.891 13.8292 81.4281 13.7638 80.9272 13.7638C80.0288 13.7638 79.2283 13.9898 78.5259 14.4418C77.8235 14.8937 77.2708 15.558 76.8679 16.4347C76.4704 17.3059 76.2717 18.3677 76.2717 19.62C76.2717 20.8833 76.4704 21.9532 76.8679 22.8299C77.2654 23.7066 77.8181 24.3736 78.5259 24.831C79.2338 25.2829 80.056 25.5089 80.9925 25.5089C81.842 25.5089 82.5771 25.3455 83.1978 25.0188C83.824 24.6921 84.3059 24.2293 84.6435 23.6303C84.9811 23.0259 85.1499 22.3181 85.1499 21.5067L85.8359 21.6129H81.2947V19.2443H88.082V21.2536C88.082 22.6856 87.7771 23.9244 87.1673 24.9698C86.5574 26.0153 85.7189 26.8211 84.6516 27.3874C83.5844 27.9483 82.3593 28.2287 80.9762 28.2287C79.4353 28.2287 78.0822 27.8829 76.9169 27.1914C75.7571 26.4944 74.8505 25.5062 74.1971 24.2266C73.5491 22.9415 73.2251 21.4169 73.2251 19.6527C73.2251 18.3023 73.4157 17.0962 73.7969 16.0344C74.1835 14.9727 74.7225 14.0715 75.4141 13.331C76.1056 12.585 76.9169 12.0187 77.848 11.6321C78.7791 11.2401 79.7919 11.044 80.8864 11.044C81.812 11.044 82.6751 11.1802 83.4755 11.4524C84.2759 11.7192 84.9865 12.1004 85.6072 12.5959C86.2334 13.0914 86.748 13.6795 87.1509 14.3601C87.5539 15.0407 87.8179 15.7921 87.9432 16.6143H84.8558ZM91.0122 28V11.2727H94.0423V25.4599H101.41V28H91.0122ZM106.816 28H103.582L109.471 11.2727H113.212L119.109 28H115.874L111.407 14.7031H111.276L106.816 28ZM106.923 21.4414H115.744V23.8754H106.923V21.4414ZM130.133 15.8711C130.057 15.1578 129.735 14.6024 129.169 14.2049C128.608 13.8074 127.879 13.6087 126.98 13.6087C126.349 13.6087 125.807 13.704 125.355 13.8945C124.903 14.0851 124.557 14.3437 124.318 14.6705C124.078 14.9972 123.956 15.3701 123.95 15.7894C123.95 16.1379 124.029 16.4401 124.187 16.696C124.35 16.9519 124.571 17.1697 124.849 17.3494C125.126 17.5237 125.434 17.6707 125.771 17.7905C126.109 17.9103 126.449 18.011 126.792 18.0927L128.361 18.4847C128.992 18.6317 129.599 18.8305 130.182 19.081C130.77 19.3314 131.296 19.6473 131.758 20.0284C132.227 20.4096 132.597 20.8697 132.869 21.4087C133.141 21.9478 133.278 22.5794 133.278 23.3036C133.278 24.2837 133.027 25.1468 132.526 25.8928C132.025 26.6333 131.301 27.2132 130.354 27.6325C129.412 28.0463 128.271 28.2532 126.931 28.2532C125.63 28.2532 124.5 28.0517 123.542 27.6488C122.589 27.2459 121.843 26.6578 121.304 25.8846C120.77 25.1114 120.482 24.1694 120.438 23.0586H123.419C123.463 23.6412 123.642 24.1258 123.958 24.5124C124.274 24.899 124.685 25.1876 125.192 25.3782C125.703 25.5688 126.275 25.6641 126.907 25.6641C127.566 25.6641 128.143 25.5661 128.638 25.37C129.139 25.1686 129.531 24.8909 129.814 24.5369C130.098 24.1776 130.242 23.7583 130.247 23.2791C130.242 22.8435 130.114 22.4841 129.863 22.201C129.613 21.9124 129.262 21.6728 128.81 21.4822C128.363 21.2862 127.841 21.112 127.242 20.9595L125.339 20.4695C123.961 20.1155 122.872 19.5792 122.072 18.8604C121.277 18.1362 120.879 17.1752 120.879 15.9773C120.879 14.9917 121.146 14.1287 121.68 13.3881C122.219 12.6476 122.951 12.0732 123.877 11.6648C124.802 11.2509 125.85 11.044 127.021 11.044C128.208 11.044 129.248 11.2509 130.141 11.6648C131.04 12.0732 131.745 12.6422 132.257 13.3718C132.768 14.096 133.032 14.9291 133.049 15.8711H130.133ZM145.07 15.8711C144.993 15.1578 144.672 14.6024 144.106 14.2049C143.545 13.8074 142.815 13.6087 141.917 13.6087C141.285 13.6087 140.743 13.704 140.291 13.8945C139.84 14.0851 139.494 14.3437 139.254 14.6705C139.015 14.9972 138.892 15.3701 138.887 15.7894C138.887 16.1379 138.966 16.4401 139.123 16.696C139.287 16.9519 139.507 17.1697 139.785 17.3494C140.063 17.5237 140.37 17.6707 140.708 17.7905C141.046 17.9103 141.386 18.011 141.729 18.0927L143.297 18.4847C143.929 18.6317 144.536 18.8305 145.119 19.081C145.707 19.3314 146.232 19.6473 146.695 20.0284C147.163 20.4096 147.533 20.8697 147.806 21.4087C148.078 21.9478 148.214 22.5794 148.214 23.3036C148.214 24.2837 147.964 25.1468 147.463 25.8928C146.962 26.6333 146.237 27.2132 145.29 27.6325C144.348 28.0463 143.207 28.2532 141.868 28.2532C140.566 28.2532 139.437 28.0517 138.478 27.6488C137.525 27.2459 136.779 26.6578 136.24 25.8846C135.707 25.1114 135.418 24.1694 135.375 23.0586H138.356C138.399 23.6412 138.579 24.1258 138.895 24.5124C139.211 24.899 139.622 25.1876 140.128 25.3782C140.64 25.5688 141.212 25.6641 141.843 25.6641C142.502 25.6641 143.079 25.5661 143.575 25.37C144.076 25.1686 144.468 24.8909 144.751 24.5369C145.034 24.1776 145.178 23.7583 145.184 23.2791C145.178 22.8435 145.05 22.4841 144.8 22.201C144.55 21.9124 144.198 21.6728 143.746 21.4822C143.3 21.2862 142.777 21.112 142.178 20.9595L140.275 20.4695C138.898 20.1155 137.809 19.5792 137.008 18.8604C136.213 18.1362 135.816 17.1752 135.816 15.9773C135.816 14.9917 136.082 14.1287 136.616 13.3881C137.155 12.6476 137.887 12.0732 138.813 11.6648C139.739 11.2509 140.787 11.044 141.958 11.044C143.145 11.044 144.185 11.2509 145.078 11.6648C145.976 12.0732 146.681 12.6422 147.193 13.3718C147.705 14.096 147.969 14.9291 147.985 15.8711H145.07Z" fill="#3229B1"/>
                    <path d="M105.65 76V59.2727H112.053C113.262 59.2727 114.267 59.4633 115.067 59.8445C115.873 60.2202 116.475 60.7347 116.872 61.3881C117.275 62.0415 117.477 62.7821 117.477 63.6097C117.477 64.2904 117.346 64.873 117.085 65.3576C116.823 65.8368 116.472 66.2261 116.031 66.5256C115.59 66.825 115.097 67.0401 114.553 67.1708V67.3342C115.146 67.3668 115.715 67.5492 116.26 67.8814C116.81 68.2081 117.259 68.6709 117.607 69.2699C117.956 69.8688 118.13 70.593 118.13 71.4425C118.13 72.3082 117.92 73.0869 117.501 73.7784C117.082 74.4645 116.45 75.0063 115.606 75.4038C114.762 75.8013 113.7 76 112.421 76H105.65ZM108.68 73.468H111.939C113.039 73.468 113.831 73.2584 114.316 72.8391C114.806 72.4144 115.051 71.8699 115.051 71.2056C115.051 70.7101 114.928 70.2636 114.683 69.8661C114.438 69.4632 114.09 69.1474 113.638 68.9187C113.186 68.6845 112.647 68.5675 112.021 68.5675H108.68V73.468ZM108.68 66.3867H111.678C112.2 66.3867 112.671 66.2914 113.091 66.1009C113.51 65.9048 113.839 65.6299 114.079 65.2759C114.324 64.9165 114.446 64.4918 114.446 64.0018C114.446 63.3538 114.218 62.8202 113.76 62.4009C113.308 61.9817 112.636 61.772 111.743 61.772H108.68V66.3867ZM120.766 76V59.2727H127.039C128.324 59.2727 129.402 59.5123 130.273 59.9915C131.15 60.4706 131.811 61.1295 132.258 61.968C132.71 62.8011 132.936 63.7486 132.936 64.8104C132.936 65.883 132.71 66.8359 132.258 67.669C131.806 68.5021 131.139 69.1583 130.257 69.6374C129.375 70.1112 128.288 70.348 126.998 70.348H122.841V67.8569H126.59C127.341 67.8569 127.956 67.7262 128.435 67.4648C128.915 67.2035 129.269 66.8441 129.497 66.3867C129.731 65.9293 129.848 65.4039 129.848 64.8104C129.848 64.2169 129.731 63.6941 129.497 63.2422C129.269 62.7902 128.912 62.439 128.427 62.1886C127.948 61.9326 127.33 61.8047 126.573 61.8047H123.796V76H120.766ZM150.515 67.6364C150.515 69.4387 150.177 70.9824 149.502 72.2674C148.832 73.547 147.917 74.5271 146.757 75.2077C145.603 75.8884 144.294 76.2287 142.829 76.2287C141.364 76.2287 140.052 75.8884 138.892 75.2077C137.738 74.5217 136.823 73.5388 136.148 72.2592C135.478 70.9742 135.143 69.4332 135.143 67.6364C135.143 65.834 135.478 64.2931 136.148 63.0135C136.823 61.7285 137.738 60.7456 138.892 60.065C140.052 59.3844 141.364 59.044 142.829 59.044C144.294 59.044 145.603 59.3844 146.757 60.065C147.917 60.7456 148.832 61.7285 149.502 63.0135C150.177 64.2931 150.515 65.834 150.515 67.6364ZM147.468 67.6364C147.468 66.3677 147.269 65.2977 146.872 64.4265C146.48 63.5498 145.935 62.8883 145.238 62.4418C144.541 61.9898 143.738 61.7638 142.829 61.7638C141.92 61.7638 141.116 61.9898 140.419 62.4418C139.722 62.8883 139.175 63.5498 138.778 64.4265C138.386 65.2977 138.19 66.3677 138.19 67.6364C138.19 68.9051 138.386 69.9777 138.778 70.8544C139.175 71.7256 139.722 72.3872 140.419 72.8391C141.116 73.2856 141.92 73.5089 142.829 73.5089C143.738 73.5089 144.541 73.2856 145.238 72.8391C145.935 72.3872 146.48 71.7256 146.872 70.8544C147.269 69.9777 147.468 68.9051 147.468 67.6364Z" fill="#3229B1"/>
                    <path d="M88.2109 36H93L97.0625 45.9062H97.25L101.313 36H106.102V52H102.336V42.1719H102.203L98.3594 51.8984H95.9531L92.1094 42.1172H91.9766V52H88.2109V36ZM123.615 44C123.615 45.7604 123.277 47.2526 122.6 48.4766C121.923 49.7005 121.006 50.6302 119.85 51.2656C118.699 51.901 117.407 52.2187 115.975 52.2187C114.537 52.2187 113.243 51.8984 112.092 51.2578C110.941 50.6172 110.027 49.6875 109.35 48.4687C108.678 47.2448 108.342 45.7552 108.342 44C108.342 42.2396 108.678 40.7474 109.35 39.5234C110.027 38.2995 110.941 37.3698 112.092 36.7344C113.243 36.099 114.537 35.7812 115.975 35.7812C117.407 35.7812 118.699 36.099 119.85 36.7344C121.006 37.3698 121.923 38.2995 122.6 39.5234C123.277 40.7474 123.615 42.2396 123.615 44ZM119.662 44C119.662 42.9583 119.514 42.0781 119.217 41.3594C118.925 40.6406 118.503 40.0964 117.951 39.7266C117.404 39.3568 116.745 39.1719 115.975 39.1719C115.209 39.1719 114.55 39.3568 113.998 39.7266C113.446 40.0964 113.021 40.6406 112.725 41.3594C112.433 42.0781 112.287 42.9583 112.287 44C112.287 45.0417 112.433 45.9219 112.725 46.6406C113.021 47.3594 113.446 47.9036 113.998 48.2734C114.55 48.6432 115.209 48.8281 115.975 48.8281C116.745 48.8281 117.404 48.6432 117.951 48.2734C118.503 47.9036 118.925 47.3594 119.217 46.6406C119.514 45.9219 119.662 45.0417 119.662 44ZM135.553 36H139.412V46.3203C139.412 47.513 139.128 48.5521 138.561 49.4375C137.993 50.3177 137.201 51 136.186 51.4844C135.17 51.9635 133.99 52.2031 132.646 52.2031C131.287 52.2031 130.1 51.9635 129.084 51.4844C128.068 51 127.279 50.3177 126.717 49.4375C126.154 48.5521 125.873 47.513 125.873 46.3203V36H129.74V45.9844C129.74 46.5365 129.86 47.0286 130.1 47.4609C130.344 47.8932 130.686 48.2318 131.123 48.4766C131.561 48.7214 132.068 48.8438 132.646 48.8438C133.225 48.8438 133.73 48.7214 134.162 48.4766C134.6 48.2318 134.941 47.8932 135.186 47.4609C135.43 47.0286 135.553 46.5365 135.553 45.9844V36ZM155.453 36V52H152.172L145.805 42.7656H145.703V52H141.836V36H145.164L151.461 45.2187H151.594V36H155.453ZM157.361 39.1406V36H170.885V39.1406H166.033V52H162.221V39.1406H157.361ZM174.236 52H170.08L175.479 36H180.627L186.025 52H181.869L178.111 40.0312H177.986L174.236 52ZM173.682 45.7031H182.369V48.6406H173.682V45.7031ZM191.615 36V52H187.748V36H191.615ZM207.66 36V52H204.379L198.012 42.7656H197.91V52H194.043V36H197.371L203.668 45.2187H203.801V36H207.66Z" fill="#3452D3"/>
                </svg>
            </div>
            <div class="nav-content">
                <div id="bridge-dashboard" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M12.8918 0.40909C12.7793 0.28024 12.6423 0.177289 12.4894 0.10684C12.3365 0.0363915 12.1712 0 12.0041 0C11.8369 0 11.6716 0.0363915 11.5187 0.10684C11.3659 0.177289 11.2288 0.28024 11.1164 0.40909L0.320063 12.9045C0.160862 13.0833 0.0553657 13.3067 0.0165789 13.5472C-0.0222079 13.7877 0.00740967 14.0347 0.101781 14.2579C0.196152 14.481 0.351152 14.6706 0.547674 14.8031C0.744197 14.9356 0.973653 15.0054 1.20776 15.0037H3.60694V23.7505C3.60694 24.0819 3.73332 24.3997 3.95829 24.634C4.18326 24.8684 4.48838 25 4.80653 25H19.2016C19.5198 25 19.8249 24.8684 20.0498 24.634C20.2748 24.3997 20.4012 24.0819 20.4012 23.7505V15.0037H22.8004C23.1185 15.0037 23.4236 14.872 23.6486 14.6377C23.8736 14.4034 24 14.0856 24 13.7542C24.0022 13.4402 23.8908 13.1368 23.6881 12.9045L12.8918 0.40909Z" fill="#888888"/>
                    </svg>
                        
        
                    <b>Dashboard</b>
                </div>
        
                <div id="bridge-inbox" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M21.6 0H2.4C1.0764 0 0 1.09633 0 2.44444V19.5556C0 20.2039 0.252856 20.8256 0.702944 21.284C1.15303 21.7425 1.76348 22 2.4 22H21.6C22.2365 22 22.847 21.7425 23.2971 21.284C23.7471 20.8256 24 20.2039 24 19.5556V2.44444C24 1.09633 22.9236 0 21.6 0ZM20.4 11H16.6296C16.0944 13.1047 14.2332 14.6667 12 14.6667C9.7668 14.6667 7.9056 13.1047 7.3704 11H2.4V2.44444H21.6V11H20.4Z" fill="#888888"/>
                    </svg>
                        
                    <b>Inbox</b>
                </div>
        
                <div id="bridge-medical-leave" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M15.6 2C15.6 0.895431 14.7046 0 13.6 0H10.4C9.29543 0 8.4 0.89543 8.4 2V6.39531C8.4 7.49988 7.50457 8.39531 6.4 8.39531H2C0.895431 8.39531 0 9.29074 0 10.3953V13.6047C0 14.7093 0.89543 15.6047 2 15.6047H6.4C7.50457 15.6047 8.4 16.5001 8.4 17.6047V22C8.4 23.1046 9.29543 24 10.4 24H13.6C14.7046 24 15.6 23.1046 15.6 22V17.6047C15.6 16.5001 16.4954 15.6047 17.6 15.6047H22C23.1046 15.6047 24 14.7093 24 13.6047V10.3953C24 9.29075 23.1046 8.39531 22 8.39531H17.6C16.4954 8.39531 15.6 7.49988 15.6 6.39531V2Z" fill="black"/>
                    </svg>                    
        
                    <b>Medical Leave</b>
                </div>
        
                <div id="bridge-vacation-request" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M21.6 5.05263H18V2.52632C18 1.13305 16.9236 0 15.6 0H8.4C7.0764 0 6 1.13305 6 2.52632V5.05263H2.4C1.0764 5.05263 0 6.18568 0 7.57895V21.4737C0 22.8669 1.0764 24 2.4 24H21.6C22.9236 24 24 22.8669 24 21.4737V7.57895C24 6.18568 22.9236 5.05263 21.6 5.05263ZM4.8 7.57895H7.2V21.4737H4.8V7.57895ZM19.2 21.4737H16.8V7.57895H19.2V21.4737ZM15.6 2.52632V5.05263H8.4V2.52632H15.6Z" fill="#888888"/>
                    </svg>
                        
                    <b>Vacation Request</b>
                </div>
        
                <div id="bridge-permissions" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M22.8 0H1.2C0.88174 0 0.576515 0.15051 0.351472 0.418419C0.126428 0.686328 0 1.04969 0 1.42857V7.14286H1.0716C2.2668 7.14286 3.3756 8.11571 3.5676 9.52C3.62609 9.93005 3.60871 10.3504 3.51668 10.7516C3.42464 11.1528 3.26017 11.5253 3.03473 11.8431C2.8093 12.1608 2.52833 12.4162 2.21144 12.5913C1.89455 12.7665 1.54938 12.8572 1.2 12.8571H0V18.5714C0 18.9503 0.126428 19.3137 0.351472 19.5816C0.576515 19.8495 0.88174 20 1.2 20H22.8C23.1183 20 23.4235 19.8495 23.6485 19.5816C23.8736 19.3137 24 18.9503 24 18.5714V12.8571H22.8C22.4506 12.8572 22.1054 12.7665 21.7886 12.5913C21.4717 12.4162 21.1907 12.1608 20.9653 11.8431C20.7398 11.5253 20.5754 11.1528 20.4833 10.7516C20.3913 10.3504 20.3739 9.93005 20.4324 9.52C20.6244 8.11571 21.7332 7.14286 22.9284 7.14286H24V1.42857C24 1.04969 23.8736 0.686328 23.6485 0.418419C23.4235 0.15051 23.1183 0 22.8 0ZM10.8 17.1429H8.4V14.2857H10.8V17.1429ZM10.8 11.4286H8.4V8.57143H10.8V11.4286ZM10.8 5.71429H8.4V2.85714H10.8V5.71429Z" fill="#888888"/>
                    </svg>                    
        
                    <b>Permissions</b>
                </div>
        
                <div id="bridge-employees" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M20 2H8C7.46957 2 6.96086 2.21071 6.58579 2.58579C6.21071 2.96086 6 3.46957 6 4V16C6 16.5304 6.21071 17.0391 6.58579 17.4142C6.96086 17.7893 7.46957 18 8 18H20C20.5304 18 21.0391 17.7893 21.4142 17.4142C21.7893 17.0391 22 16.5304 22 16V4C22 3.46957 21.7893 2.96086 21.4142 2.58579C21.0391 2.21071 20.5304 2 20 2ZM14 4.5C14.663 4.5 15.2989 4.76339 15.7678 5.23223C16.2366 5.70107 16.5 6.33696 16.5 7C16.5 7.66304 16.2366 8.29893 15.7678 8.76777C15.2989 9.23661 14.663 9.5 14 9.5C13.337 9.5 12.7011 9.23661 12.2322 8.76777C11.7634 8.29893 11.5 7.66304 11.5 7C11.5 6.33696 11.7634 5.70107 12.2322 5.23223C12.7011 4.76339 13.337 4.5 14 4.5ZM19 14.75C19 14.8881 18.8881 15 18.75 15H9.25C9.11193 15 9 14.8881 9 14.75V14.75C9 12.901 11.254 11 14 11C16.746 11 19 12.901 19 14.75V14.75Z" fill="black"/>
                        <path fill="var(--color-extra-1)" d="M4 9C4 8.44772 3.55228 8 3 8V8C2.44772 8 2 8.44772 2 9V20C2 21.103 2.897 22 4 22H15C15.5523 22 16 21.5523 16 21V21C16 20.4477 15.5523 20 15 20H6C4.89543 20 4 19.1046 4 18V9Z" fill="black"/>
                    </svg>                               
                        
                    <b>Employees</b>
                </div>
        
                <div id="bridge-reports" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M5.05263 22H1.26316C0.928148 22 0.606858 21.878 0.36997 21.6609C0.133082 21.4437 0 21.1492 0 20.8421V11.5789C0 11.2719 0.133082 10.9773 0.36997 10.7602C0.606858 10.543 0.928148 10.4211 1.26316 10.4211H5.05263C5.38764 10.4211 5.70893 10.543 5.94582 10.7602C6.18271 10.9773 6.31579 11.2719 6.31579 11.5789V20.8421C6.31579 21.1492 6.18271 21.4437 5.94582 21.6609C5.70893 21.878 5.38764 22 5.05263 22ZM13.8947 22H10.1053C9.77025 22 9.44896 21.878 9.21208 21.6609C8.97519 21.4437 8.8421 21.1492 8.8421 20.8421V1.15789C8.8421 0.850802 8.97519 0.556287 9.21208 0.339139C9.44896 0.121992 9.77025 0 10.1053 0H13.8947C14.2297 0 14.551 0.121992 14.7879 0.339139C15.0248 0.556287 15.1579 0.850802 15.1579 1.15789V20.8421C15.1579 21.1492 15.0248 21.4437 14.7879 21.6609C14.551 21.878 14.2297 22 13.8947 22ZM22.7368 22H18.9474C18.6124 22 18.2911 21.878 18.0542 21.6609C17.8173 21.4437 17.6842 21.1492 17.6842 20.8421V8.10526C17.6842 7.79817 17.8173 7.50366 18.0542 7.28651C18.2911 7.06936 18.6124 6.94737 18.9474 6.94737H22.7368C23.0719 6.94737 23.3931 7.06936 23.63 7.28651C23.8669 7.50366 24 7.79817 24 8.10526V20.8421C24 21.1492 23.8669 21.4437 23.63 21.6609C23.3931 21.878 23.0719 22 22.7368 22Z" fill="#737373"/>
                    </svg>                       
                        
                    <b>Reports</b>
                </div>
        
                <div id="bridge-history" class="nav-content-element">
        
                    <!-- LOGO -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-extra-1)" d="M12.0002 0.333344C5.56716 0.333344 0.333496 5.56701 0.333496 12C0.333496 18.433 5.56716 23.6667 12.0002 23.6667C18.4332 23.6667 23.6668 18.433 23.6668 12C23.6668 5.56701 18.4332 0.333344 12.0002 0.333344ZM16.6668 16.6667C16.2113 17.1222 15.4727 17.1222 15.0172 16.6667L11.4193 13.0688C11.0442 12.6937 10.8335 12.185 10.8335 11.6546V6.16668C10.8335 5.52234 11.3558 5.00001 12.0002 5.00001V5.00001C12.6445 5.00001 13.1668 5.52234 13.1668 6.16668V10.6886C13.1668 11.219 13.3775 11.7277 13.7526 12.1028L16.6668 15.017C17.1224 15.4726 17.1224 16.2111 16.6668 16.6667V16.6667Z" fill="black"/>
                    </svg>                    
                                                    
                        
                    <b>History</b>
                </div>
        
                <br>
            </div>
            <div class="nav-profile">
        
                <div id="bridge-log-out" class="nav-profile-element" onclick="logOut()">
        
                    <!-- LOGO -->
                    <svg width="23" height="20" viewBox="0 0 23 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill="var(--color-texto-1)" d="M0.976086 9.21967C0.475679 9.62 0.475679 10.3811 0.976086 10.7814L3.93052 13.145C4.58529 13.6688 5.55522 13.2026 5.55522 12.3641V12.1116C5.55522 11.5593 6.00293 11.1116 6.55522 11.1116H14.5546C15.1069 11.1116 15.5546 10.6639 15.5546 10.1116V9.8895C15.5546 9.33721 15.1069 8.8895 14.5546 8.8895H6.55522C6.00293 8.8895 5.55522 8.44178 5.55522 7.8895V7.63699C5.55522 6.79848 4.58528 6.33231 3.93052 6.85612L0.976086 9.21967Z" fill="#EBEBEB"/>
                        <path fill="var(--color-texto-1)" d="M12.2225 3.81767e-05C10.9088 -0.0036046 9.60731 0.253479 8.3936 0.756396C7.48754 1.13183 6.64381 1.6387 5.88898 2.25919C5.46325 2.60915 5.46714 3.24514 5.85683 3.63483L6.01576 3.79377C6.40629 4.18429 7.03597 4.17823 7.47263 3.84008C8.82722 2.7911 10.4812 2.22212 12.2225 2.22212C14.3002 2.22212 16.2534 3.03208 17.7222 4.50087C19.191 5.96967 20.0009 7.92289 20.0009 10.0005C20.0009 12.0782 19.191 14.0314 17.7222 15.5002C16.2534 16.969 14.3002 17.779 12.2225 17.779C10.4812 17.779 8.82722 17.21 7.47263 16.161C7.03597 15.8228 6.40629 15.8168 6.01576 16.2073L5.85875 16.3643C5.46831 16.7548 5.46528 17.3922 5.89202 17.7427C7.67307 19.2052 9.88622 20.001 12.2225 20.001C14.8946 20.001 17.4056 18.96 19.2932 17.0712C21.182 15.1836 22.223 12.6726 22.223 10.0005C22.223 7.32848 21.182 4.81752 19.2932 2.92986C18.367 1.99807 17.2652 1.25931 16.0515 0.756396C14.8378 0.253479 13.5363 -0.0036046 12.2225 3.81767e-05Z" fill="#EBEBEB"/>
                    </svg>                                      
                        
                    <b>Log Out</b>
                </div>
        
                <div class="nav-profile-info">
                    <img src="../resources/svg/def-user.svg" alt="">
                    <div>
                        <p class="nav-nombre">Joselito Perez</p>
                        <p class="nav-rol">ADMINISTRATOR</p>
                    </div>
                </div>
            </div>
            </div>`;
        loadNavBarJs();
    } else {
      sweetAlert(3, DATA.error, false, "index.html");
    }
  } else {
    // Se comprueba si la página web es la principal, de lo contrario se direcciona a iniciar sesión.
    if (!location.pathname.endsWith("index.html")) {
        location.href = "index.html";
    }
  }
};

const loadNavBarJs = () => {
    const showMenu = (toggleId, navId) =>{
        const toggle = document.getElementById(toggleId),
        nav = document.getElementById(navId)
        
        // Validate that variables exist
        if(toggle && nav){
            toggle.addEventListener('click', ()=>{
                // We add the show-menu class to the div tag with the nav__menu class
                nav.classList.toggle('show-nav-bar')
                document.querySelector('main').classList.toggle("blured")
            })
        }
    }
    
    showMenu('nav-side-bar-button','nav-bar')
    
    window.addEventListener('resize', function() {
        if (window.innerWidth > 600) {
            document.querySelector('main').classList.remove("blured");
            document.getElementById('nav-bar').classList.remove("show-nav-bar");
        }
    });
    
    
    // Definir las rutas y los IDs
    const rutas = ['/dashboard', '/inbox', '/medical', '/vacation', '/permissions', '/employees', '/reports', '/history', '/index'];
    const ids = ['dashboard', 'inbox', 'medical-leave', 'vacation-request', 'permissions', 'employees', 'reports', 'history', 'log-out'];
    
    // Agregar event listener a cada div
    ids.forEach((id, index) => {
        const div = document.getElementById("bridge-"+id);
        if (div) {
            div.addEventListener('click', () => {
                window.location.href = "/CrystalGate/views"+rutas[index]+".html";
            });
        }
    });
    
    // Colorear el lugar en el que esta actualmente
    
    const CurrentLocation = document.body.id;
    
    if (CurrentLocation.startsWith("local-")) {
        const currentPageId = CurrentLocation.replace("local-", "");
        const currentPageIndex = ids.indexOf(currentPageId);
        if (currentPageIndex !== -1) {
            const currentPageDiv = document.getElementById("bridge-" + currentPageId);
            if (currentPageDiv) {
                currentPageDiv.classList.add("nav-item-selected");
            }
        }
    }
}